<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>Java I/O面试题</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
<style type="text/css">

#wmd-preview h1  {
    color: #0077bb; /* 将标题改为蓝色 */
}</style>
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="dke7" id="java-io面试题">Java I/O面试题</h1><p data-anchor-id="a372"><code>I/O</code> <code>Java面试题</code></p><hr><div class="md-section-divider"></div><h3 data-anchor-id="f8ub" id="流的概念和作用">流的概念和作用</h3><p data-anchor-id="owzq">流是一种有顺序的，有起点和终点的字节集合，是对数据传输的总成或抽象。即数据在两设备之间的传输称之为流，流的本质是数据传输，根据数据传输的特性讲流抽象为各种类，方便更直观的进行数据操作。</p><div class="md-section-divider"></div><h3 data-anchor-id="ccb3" id="io流的分类">IO流的分类</h3><p data-anchor-id="ur88">根据数据处理类的不同分为：字符流和字节流。</p><p data-anchor-id="wi4g">根据数据流向不同分为：输入流和输出流。</p><div class="md-section-divider"></div><h3 data-anchor-id="1q8v" id="字符流和字节流">字符流和字节流</h3><p data-anchor-id="9s54">字符流的由来：因为数据编码的不同，而有了对字符进行高效操作的流对象，其本质就是基于字节流读取时，去查了指定的码表。字符流和字节流的区别：</p><p data-anchor-id="uod8">（1）读写单位不同：字节流一字节（8bit）为单位，字符流以字符为单位，根据码表映射字符，一次可能读多个字节。</p><p data-anchor-id="gfpj">（2）处理对象不同：字节流能处理所有类型的数据（例如图片，avi），而字符流只能处理字符类型的数据。</p><p data-anchor-id="w5ix">（3）字节流操作的时候本身是不会用到缓冲区的，是对文件本身的直接操作。而字符流在操作的时候是会用到缓冲区的，通过缓冲区来操作文件。</p><p data-anchor-id="kqpl">结论：优先使用字节流，首先因为在硬盘上所有的文件都是以字节的形式进行传输或保存的，包括图片等内容。但是字符流只是在内存中才会形成，所以在开发中字节流使用广泛。</p><div class="md-section-divider"></div><h2 data-anchor-id="h29b" id="输入流和输出流">输入流和输出流</h2><p data-anchor-id="94ct">对输入流只能进行读操作，对输出流只能进行写操作。程序中根据数据传输的不同特性使用不同的流。</p><div class="md-section-divider"></div><h2 data-anchor-id="7xei" id="输入字节流inputstream">输入字节流InputStream</h2><p data-anchor-id="cm2y">InputStream是所有输入字节流的父类，它是一个抽象类。</p><p data-anchor-id="b84r">ByteArrayInputStream、StringBufferInputStream、FileInputStream 是三种基本的介质流，它们分别从Byte 数组、StringBuffer、和本地文件中读取数据。PipedInputStream 是从与其它线程共用的管道中读取数据。</p><p data-anchor-id="p55c">ObjectInputStream 和所有FilterInputStream的子类都是装饰流（装饰器模式的主角）。意思是FileInputStream类可以通过一个String路径名创建一个对象，FileInputStream(String name)。而DataInputStream必须装饰一个类才能返回一个对象，DataInputStream(InputStream in)。</p><p data-anchor-id="7z6m">ByteArrayInputStream:</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="kscu"><ol class="linenums"><li class="L0"><code class="language-java"><span class="com">/**  </span></code></li><li class="L1"><code class="language-java"><span class="com"> * 使用内存操作流将一个大写字母转化为小写字母  </span></code></li><li class="L2"><code class="language-java"><span class="com"> * */</span><span class="pln">  </span></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.*;</span><span class="pln">  </span></code></li><li class="L4"><code class="language-java"><span class="kwd">class</span><span class="pln"> hello</span><span class="pun">{</span><span class="pln">  </span></code></li><li class="L5"><code class="language-java"><span class="pln">   </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span></code></li><li class="L6"><code class="language-java"><span class="pln">       </span><span class="typ">String</span><span class="pln"> str</span><span class="pun">=</span><span class="str">"Homiss"</span><span class="pun">;</span><span class="pln">  </span></code></li><li class="L7"><code class="language-java"><span class="pln">       </span><span class="typ">ByteArrayInputStream</span><span class="pln"> input</span><span class="pun">=</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ByteArrayInputStream</span><span class="pun">(</span><span class="pln">str</span><span class="pun">.</span><span class="pln">getBytes</span><span class="pun">());</span><span class="pln">  </span></code></li><li class="L8"><code class="language-java"><span class="pln">       </span><span class="typ">ByteArrayOutputStream</span><span class="pln"> output</span><span class="pun">=</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ByteArrayOutputStream</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L9"><code class="language-java"><span class="pln">       </span><span class="kwd">int</span><span class="pln"> temp</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span></code></li><li class="L0"><code class="language-java"><span class="pln">       </span><span class="kwd">while</span><span class="pun">((</span><span class="pln">temp</span><span class="pun">=</span><span class="pln">input</span><span class="pun">.</span><span class="pln">read</span><span class="pun">())!=-</span><span class="lit">1</span><span class="pun">){</span><span class="pln">  </span></code></li><li class="L1"><code class="language-java"><span class="pln">           </span><span class="kwd">char</span><span class="pln"> ch</span><span class="pun">=(</span><span class="kwd">char</span><span class="pun">)</span><span class="pln">temp</span><span class="pun">;</span><span class="pln">  </span></code></li><li class="L2"><code class="language-java"><span class="pln">           output</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="typ">Character</span><span class="pun">.</span><span class="pln">toLowerCase</span><span class="pun">(</span><span class="pln">ch</span><span class="pun">));</span><span class="pln">  </span></code></li><li class="L3"><code class="language-java"><span class="pln">       </span><span class="pun">}</span><span class="pln">  </span></code></li><li class="L4"><code class="language-java"><span class="pln">       </span><span class="typ">String</span><span class="pln"> outStr</span><span class="pun">=</span><span class="pln">output</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L5"><code class="language-java"><span class="pln">       input</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L6"><code class="language-java"><span class="pln">       output</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L7"><code class="language-java"><span class="pln">       </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">outStr</span><span class="pun">);</span><span class="pln">  </span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="pun">}</span><span class="pln">  </span></code></li><li class="L9"><code class="language-java"><span class="pun">}</span><span class="pln">  </span></code></li></ol></pre><p data-anchor-id="m8dn">字节流FileInputStream读取文件：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="hqoj"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">File</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">FileInputStream</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">InputStream</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="com">/**</span></code></li><li class="L6"><code class="language-java"><span class="com"> * @author Homiss</span></code></li><li class="L7"><code class="language-java"><span class="com"> * 逐字节读取文件内容</span></code></li><li class="L8"><code class="language-java"><span class="com"> */</span></code></li><li class="L9"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">IOFileInputStream</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">...</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">IOException</span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="typ">String</span><span class="pln"> path </span><span class="pun">=</span><span class="pln"> </span><span class="str">"F:"</span><span class="pun">+</span><span class="typ">File</span><span class="pun">.</span><span class="pln">separator</span><span class="pun">+</span><span class="str">"test.txt"</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="typ">File</span><span class="pln"> file </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">path</span><span class="pun">);</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="typ">InputStream</span><span class="pln"> in </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileInputStream</span><span class="pun">(</span><span class="pln">file</span><span class="pun">);</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[</span><span class="lit">1024</span><span class="pun">];</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> temp </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">while</span><span class="pun">((</span><span class="pln">temp </span><span class="pun">=</span><span class="pln"> in</span><span class="pun">.</span><span class="pln">read</span><span class="pun">())</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">){</span></code></li><li class="L0"><code class="language-java"><span class="pln">            b</span><span class="pun">[</span><span class="pln">count</span><span class="pun">++]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">byte</span><span class="pun">)</span><span class="pln">temp</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">String</span><span class="pun">(</span><span class="pln">b</span><span class="pun">));</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="fzi9">FileOutputStream添加内容：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="nc0w"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">File</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">FileOutputStream</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"></code></li><li class="L4"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">IOFileOutputStream</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">...</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">IOException</span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="typ">String</span><span class="pln"> path </span><span class="pun">=</span><span class="pln"> </span><span class="str">"f:"</span><span class="pun">+</span><span class="typ">File</span><span class="pun">.</span><span class="pln">separator</span><span class="pun">+</span><span class="str">"test.txt"</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="com">//true表示在文件末尾追加内容</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="typ">FileOutputStream</span><span class="pln"> fout </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileOutputStream</span><span class="pun">(</span><span class="pln">path</span><span class="pun">,</span><span class="kwd">true</span><span class="pun">);</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="typ">String</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> </span><span class="str">"\r\n半兽人"</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">        fout</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">str</span><span class="pun">.</span><span class="pln">getBytes</span><span class="pun">());</span></code></li><li class="L3"><code class="language-java"><span class="pln">        fout</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="ds4d">PushBackInputStream回退流操作：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="owfk"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">ByteArrayInputStream</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">PushbackInputStream</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"></code></li><li class="L4"><code class="language-java"><span class="com">/**</span></code></li><li class="L5"><code class="language-java"><span class="com"> * @author Homiss</span></code></li><li class="L6"><code class="language-java"><span class="com"> * PushbackInputStream</span></code></li><li class="L7"><code class="language-java"><span class="com"> */</span></code></li><li class="L8"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">IOPushbackInputStream</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-java"></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">...</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">IOException</span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="typ">String</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> </span><span class="str">"hello , this is my Blog!"</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="typ">ByteArrayInputStream</span><span class="pln"> in </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ByteArrayInputStream</span><span class="pun">(</span><span class="pln">str</span><span class="pun">.</span><span class="pln">getBytes</span><span class="pun">());</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="typ">PushbackInputStream</span><span class="pln"> pis </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PushbackInputStream</span><span class="pun">(</span><span class="pln">in</span><span class="pun">);</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> temp </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">while</span><span class="pun">((</span><span class="pln">temp </span><span class="pun">=</span><span class="pln"> pis</span><span class="pun">.</span><span class="pln">read</span><span class="pun">())</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">){</span></code></li><li class="L7"><code class="language-java"><span class="pln">            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">temp </span><span class="pun">==</span><span class="pln"> </span><span class="str">','</span><span class="pun">){</span></code></li><li class="L8"><code class="language-java"><span class="pln">                pis</span><span class="pun">.</span><span class="pln">unread</span><span class="pun">(</span><span class="pln">temp</span><span class="pun">);</span></code></li><li class="L9"><code class="language-java"><span class="pln">                temp </span><span class="pun">=</span><span class="pln"> pis</span><span class="pun">.</span><span class="pln">read</span><span class="pun">();</span></code></li><li class="L0"><code class="language-java"><span class="pln">                </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">((</span><span class="kwd">char</span><span class="pun">)</span><span class="pln">temp</span><span class="pun">);</span></code></li><li class="L1"><code class="language-java"><span class="pln">            </span><span class="pun">}</span><span class="kwd">else</span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">                </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">print</span><span class="pun">((</span><span class="kwd">char</span><span class="pun">)</span><span class="pln">temp</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">            </span><span class="pun">}</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="amfr">PipedInputStream管道流操作：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ckdg"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">PipedInputStream</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">PipedOutputStream</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"></code></li><li class="L4"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">IOPipedOutputStream</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">...</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">IOException</span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="typ">Send</span><span class="pln"> send</span><span class="pun">=</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Send</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="typ">Recive</span><span class="pln"> recive</span><span class="pun">=</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Recive</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">try</span><span class="pun">{</span><span class="pln">  </span></code></li><li class="L0"><code class="language-java"><span class="pln">           send</span><span class="pun">.</span><span class="pln">getOut</span><span class="pun">().</span><span class="pln">connect</span><span class="pun">(</span><span class="pln">recive</span><span class="pun">.</span><span class="pln">getInput</span><span class="pun">());</span><span class="pln">  </span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="pun">}</span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Exception</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span></code></li><li class="L2"><code class="language-java"><span class="pln">           e</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="pun">}</span><span class="pln">  </span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Thread</span><span class="pun">(</span><span class="pln">recive</span><span class="pun">).</span><span class="pln">start</span><span class="pun">();</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Thread</span><span class="pun">(</span><span class="pln">send</span><span class="pun">).</span><span class="pln">start</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="language-java"><span class="pun">}</span></code></li><li class="L8"><code class="language-java"></code></li><li class="L9"><code class="language-java"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Send</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Runnable</span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">PipedOutputStream</span><span class="pln"> out </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Send</span><span class="pun">(){</span></code></li><li class="L3"><code class="language-java"><span class="pln">        out </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PipedOutputStream</span><span class="pun">();</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">PipedOutputStream</span><span class="pln"> getOut</span><span class="pun">(){</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">out</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code class="language-java"></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="lit">@Override</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="com">// TODO Auto-generated method stub</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="typ">String</span><span class="pln"> message</span><span class="pun">=</span><span class="str">"hello , Homiss"</span><span class="pun">;</span><span class="pln">  </span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">try</span><span class="pun">{</span><span class="pln">  </span></code></li><li class="L5"><code class="language-java"><span class="pln">           out</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">message</span><span class="pun">.</span><span class="pln">getBytes</span><span class="pun">());</span><span class="pln">  </span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="pun">}</span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Exception</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span></code></li><li class="L7"><code class="language-java"><span class="pln">           e</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="pun">}</span><span class="kwd">try</span><span class="pun">{</span><span class="pln">  </span></code></li><li class="L9"><code class="language-java"><span class="pln">            out</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="pun">}</span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Exception</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span></code></li><li class="L1"><code class="language-java"><span class="pln">           e</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L2"><code class="language-java"><span class="pln">       </span><span class="pun">}</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code class="language-java"><span class="pun">}</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Recive</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Runnable</span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">PipedInputStream</span><span class="pln"> input </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Recive</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">        input </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PipedInputStream</span><span class="pun">();</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code class="language-java"></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">PipedInputStream</span><span class="pln"> getInput</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> input</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="language-java"></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="lit">@Override</span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="com">// TODO Auto-generated method stub</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[</span><span class="lit">1024</span><span class="pun">];</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">try</span><span class="pun">{</span></code></li><li class="L4"><code class="language-java"><span class="pln">            len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">input</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="pln">b</span><span class="pun">);</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="pun">}</span><span class="kwd">catch</span><span class="pun">(</span><span class="typ">Exception</span><span class="pln"> e</span><span class="pun">){</span></code></li><li class="L6"><code class="language-java"><span class="pln">            e</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"接受到的内容为:"</span><span class="pun">+(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">String</span><span class="pun">(</span><span class="pln">b</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="pln">len</span><span class="pun">)));</span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="0o0n">SequenceInputStream:将两个文本文件合并为另外一个文本文件</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="00xa"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">File</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">FileInputStream</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">FileOutputStream</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">InputStream</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">OutputStream</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">SequenceInputStream</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"></code></li><li class="L8"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SequenceInputStreamDemo</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">...</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">IOException</span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="typ">File</span><span class="pln"> f1 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="str">"f:"</span><span class="pun">+</span><span class="typ">File</span><span class="pun">.</span><span class="pln">separator</span><span class="pun">+</span><span class="str">"test.txt"</span><span class="pun">);</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="typ">File</span><span class="pln"> f2 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="str">"f:"</span><span class="pun">+</span><span class="typ">File</span><span class="pun">.</span><span class="pln">separator</span><span class="pun">+</span><span class="str">"homiss.txt"</span><span class="pun">);</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="typ">File</span><span class="pln"> f3 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="str">"f:"</span><span class="pun">+</span><span class="typ">File</span><span class="pun">.</span><span class="pln">separator</span><span class="pun">+</span><span class="str">"my.txt"</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="typ">InputStream</span><span class="pln"> in1 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileInputStream</span><span class="pun">(</span><span class="pln">f1</span><span class="pun">);</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="typ">InputStream</span><span class="pln"> in2 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileInputStream</span><span class="pun">(</span><span class="pln">f2</span><span class="pun">);</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="typ">OutputStream</span><span class="pln"> out </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileOutputStream</span><span class="pun">(</span><span class="pln">f3</span><span class="pun">);</span></code></li><li class="L7"><code class="language-java"></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="com">//合并流</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="typ">SequenceInputStream</span><span class="pln"> sis </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SequenceInputStream</span><span class="pun">(</span><span class="pln">in1</span><span class="pun">,</span><span class="pln">in2</span><span class="pun">);</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> temp </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">while</span><span class="pun">((</span><span class="pln">temp </span><span class="pun">=</span><span class="pln"> sis</span><span class="pun">.</span><span class="pln">read</span><span class="pun">())</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">){</span></code></li><li class="L2"><code class="language-java"><span class="pln">            out</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">temp</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L4"><code class="language-java"><span class="pln">        in1</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></code></li><li class="L5"><code class="language-java"><span class="pln">        in2</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></code></li><li class="L6"><code class="language-java"><span class="pln">        out</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></code></li><li class="L7"><code class="language-java"><span class="pln">        sis</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="67qj">PrintStream:也可以认为是一个辅助工具。主要可以向其他输出流，或者FileInputStream 写入数据，本身内部实现还是带缓冲的。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="1zcf"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">File</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">FileOutputStream</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">PrintStream</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">PrintStreamDemo</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">...</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">IOException</span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="typ">File</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="str">"f:"</span><span class="pun">+</span><span class="typ">File</span><span class="pun">.</span><span class="pln">separator</span><span class="pun">+</span><span class="str">"test.txt"</span><span class="pun">);</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="typ">PrintStream</span><span class="pln"> print </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PrintStream</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileOutputStream</span><span class="pun">(</span><span class="pln">f</span><span class="pun">));</span></code></li><li class="L9"><code class="language-java"></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="typ">String</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Homiss"</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> age </span><span class="pun">=</span><span class="pln"> </span><span class="lit">21</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="pln">        print</span><span class="pun">.</span><span class="pln">printf</span><span class="pun">(</span><span class="str">"姓名：%s . 年龄：%d ."</span><span class="pun">,</span><span class="pln">name</span><span class="pun">,</span><span class="pln">age</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">        print</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="22ql">ZipOutputStream:</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="14fx"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">File</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">FileInputStream</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">FileOutputStream</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">InputStream</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="pln">zip</span><span class="pun">.</span><span class="typ">ZipEntry</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="pln">zip</span><span class="pun">.</span><span class="typ">ZipOutputStream</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ZipOutputStreamDemo01</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">...</span><span class="pln"> args</span><span class="pun">)</span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">IOException</span><span class="pun">{</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="typ">File</span><span class="pln"> file </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="str">"f:"</span><span class="pun">+</span><span class="typ">File</span><span class="pun">.</span><span class="pln">separator</span><span class="pun">+</span><span class="str">"test.txt"</span><span class="pun">);</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="typ">File</span><span class="pln"> zipFile </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="str">"f:"</span><span class="pun">+</span><span class="typ">File</span><span class="pun">.</span><span class="pln">separator</span><span class="pun">+</span><span class="str">"test.zip"</span><span class="pun">);</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="typ">InputStream</span><span class="pln"> in </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileInputStream</span><span class="pun">(</span><span class="pln">file</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="typ">ZipOutputStream</span><span class="pln"> zipOut </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ZipOutputStream</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileOutputStream</span><span class="pun">(</span><span class="pln">zipFile</span><span class="pun">));</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="pln">        zipOut</span><span class="pun">.</span><span class="pln">putNextEntry</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ZipEntry</span><span class="pun">(</span><span class="pln">file</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">()));</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="com">//设置注释</span></code></li><li class="L7"><code class="language-java"><span class="pln">        zipOut</span><span class="pun">.</span><span class="pln">setComment</span><span class="pun">(</span><span class="str">"Homiss"</span><span class="pun">);</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> temp </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">while</span><span class="pun">((</span><span class="pln">temp </span><span class="pun">=</span><span class="pln"> in</span><span class="pun">.</span><span class="pln">read</span><span class="pun">())</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">){</span></code></li><li class="L0"><code class="language-java"><span class="pln">            zipOut</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">temp</span><span class="pun">);</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L2"><code class="language-java"><span class="pln">        in</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></code></li><li class="L3"><code class="language-java"><span class="pln">        zipOut</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="e96v" id="字符输入流reader">字符输入流Reader</h3><p data-anchor-id="d7vj">定义和说明：</p><blockquote data-anchor-id="sfxp" class="white-blockquote">
  <p>Reader 是所有的输入字符流的父类，它是一个抽象类。</p>
</blockquote><p data-anchor-id="mijb">CharReader、StringReader是两种基本的介质流，它们分别将Char 数组、String中读取数据。PipedReader 是从与其它线程共用的管道中读取数据。 <br>
BufferedReader 很明显就是一个装饰器，它和其子类负责装饰其它Reader 对象。 <br>
FilterReader 是所有自定义具体装饰流的父类，其子类PushbackReader 对Reader 对象进行装饰，会增加一个行号。</p><p data-anchor-id="677a">InputStreamReader 是一个连接字节流和字符流的桥梁，它将字节流转变为字符流。FileReader可以说是一个达到此功能、常用的工具类，在其源代码中明显使用了将FileInputStream 转变为Reader 的方法。我们可以从这个类中得到一定的技巧。Reader 中各个类的用途和使用方法基本和InputStream 中的类使用一致。</p><p data-anchor-id="jhpe">BufferedReader:</p><blockquote data-anchor-id="cxai" class="white-blockquote">
  <p>注意：BufferedReader只能接受字符流的缓冲区，因为每一个中文需要占据两个字节，所以需要将System.in这个字节输入流变为字符输入流，采用： <br>
  BufferedReader buf = new BufferedReader(newInputStreamReader(System.in));</p>
</blockquote><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="v5uj"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">BufferedReader</span><span class="pun">;</span><span class="pln">  </span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span><span class="pln">  </span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">InputStreamReader</span><span class="pun">;</span><span class="pln">  </span></code></li><li class="L3"><code class="language-java"></code></li><li class="L4"><code class="language-java"><span class="com">/**  </span></code></li><li class="L5"><code class="language-java"><span class="com"> * 使用缓冲区从键盘上读入内容  </span></code></li><li class="L6"><code class="language-java"><span class="com"> * */</span><span class="pln">  </span></code></li><li class="L7"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">BufferedReaderDemo</span><span class="pun">{</span><span class="pln">  </span></code></li><li class="L8"><code class="language-java"><span class="pln">   </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">){</span><span class="pln">  </span></code></li><li class="L9"><code class="language-java"><span class="pln">       </span><span class="typ">BufferedReader</span><span class="pln"> buf </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BufferedReader</span><span class="pun">(</span><span class="pln">  </span></code></li><li class="L0"><code class="language-java"><span class="pln">                newInputStreamReader</span><span class="pun">(</span><span class="typ">System</span><span class="pun">.</span><span class="pln">in</span><span class="pun">));</span><span class="pln">  </span></code></li><li class="L1"><code class="language-java"><span class="pln">       </span><span class="typ">String</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">  </span></code></li><li class="L2"><code class="language-java"><span class="pln">       </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"请输入内容"</span><span class="pun">);</span><span class="pln">  </span></code></li><li class="L3"><code class="language-java"><span class="pln">       </span><span class="kwd">try</span><span class="pun">{</span><span class="pln">  </span></code></li><li class="L4"><code class="language-java"><span class="pln">           str </span><span class="pun">=</span><span class="pln"> buf</span><span class="pun">.</span><span class="pln">readLine</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L5"><code class="language-java"><span class="pln">       </span><span class="pun">}</span><span class="kwd">catch</span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e</span><span class="pun">){</span><span class="pln">  </span></code></li><li class="L6"><code class="language-java"><span class="pln">           e</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L7"><code class="language-java"><span class="pln">       </span><span class="pun">}</span><span class="pln">  </span></code></li><li class="L8"><code class="language-java"><span class="pln">       </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"你输入的内容是："</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> str</span><span class="pun">);</span><span class="pln">  </span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="pun">}</span><span class="pln">  </span></code></li><li class="L0"><code class="language-java"><span class="pun">}</span><span class="pln">  </span></code></li></ol></pre><p data-anchor-id="znoj">Scanner类从文件中读出内容:</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="shep"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">File</span><span class="pun">;</span><span class="pln">  </span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">FileNotFoundException</span><span class="pun">;</span><span class="pln">  </span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Scanner</span><span class="pun">;</span><span class="pln">  </span></code></li><li class="L3"><code class="language-java"></code></li><li class="L4"><code class="language-java"><span class="com">/**  </span></code></li><li class="L5"><code class="language-java"><span class="com"> *Scanner的小例子，从文件中读内容  </span></code></li><li class="L6"><code class="language-java"><span class="com"> * */</span><span class="pln">  </span></code></li><li class="L7"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ScannerDemo</span><span class="pun">{</span><span class="pln">  </span></code></li><li class="L8"><code class="language-java"><span class="pln">   </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">){</span><span class="pln">  </span></code></li><li class="L9"><code class="language-java"></code></li><li class="L0"><code class="language-java"><span class="pln">       </span><span class="typ">File</span><span class="pln"> file </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="str">"d:"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="typ">File</span><span class="pun">.</span><span class="pln">separator </span><span class="pun">+</span><span class="str">"hello.txt"</span><span class="pun">);</span><span class="pln">  </span></code></li><li class="L1"><code class="language-java"><span class="pln">       </span><span class="typ">Scanner</span><span class="pln"> sca </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">  </span></code></li><li class="L2"><code class="language-java"><span class="pln">       </span><span class="kwd">try</span><span class="pun">{</span><span class="pln">  </span></code></li><li class="L3"><code class="language-java"><span class="pln">           sca </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Scanner</span><span class="pun">(</span><span class="pln">file</span><span class="pun">);</span><span class="pln">  </span></code></li><li class="L4"><code class="language-java"><span class="pln">       </span><span class="pun">}</span><span class="kwd">catch</span><span class="pun">(</span><span class="typ">FileNotFoundException</span><span class="pln"> e</span><span class="pun">){</span><span class="pln">  </span></code></li><li class="L5"><code class="language-java"><span class="pln">           e</span><span class="pun">.</span><span class="pln">printStackTrace</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L6"><code class="language-java"><span class="pln">       </span><span class="pun">}</span><span class="pln">  </span></code></li><li class="L7"><code class="language-java"><span class="pln">       </span><span class="typ">String</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> sca</span><span class="pun">.</span><span class="pln">next</span><span class="pun">();</span><span class="pln">  </span></code></li><li class="L8"><code class="language-java"><span class="pln">       </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"从文件中读取的内容是："</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> str</span><span class="pun">);</span><span class="pln">  </span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="pun">}</span><span class="pln">  </span></code></li><li class="L0"><code class="language-java"><span class="pun">}</span><span class="pln">  </span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="ep8c" id="java-io库的两个对称性">Java I/O库的两个对称性</h3><p data-anchor-id="1kvx">Java I/O库有两个对称性，他们分别是：</p><ol data-anchor-id="9o3r">
<li>输入-输出对称：比如InputStream和OutputStream各自占据byte流的输入和输出的两个平行的等级结构的根部；而Reader和Writer各自占据Char流的输入和输出的两个平行的等级结构的根部。</li>
<li>byte-char对称：InputStream和Reader的子类分别负责byte和插入流的输入；OutputStream和Writer的子类分别负责byte和插入流的输出，它们分别形成平行的等级结构。</li>
</ol><div class="md-section-divider"></div><h3 data-anchor-id="crc7" id="java-io库的两个设计模式">Java I/O库的两个设计模式</h3><p data-anchor-id="7zix">Java I/O库的总体设计是符合装饰模式和适配器模式的。如前所述，这个库中处理流的类叫流类。</p><p data-anchor-id="ivce">装饰模式（Decorator）：在由InputStream、OutputStream、Reader和Writer代表的等级结构内部，有一些流处理器可以对另一些流处理器起到装饰作用，形成新的、具有改善了的功能的流处理器。</p><p data-anchor-id="4g49">适配器模式（Adapter）：在由InputStream、OutputStream、Reader和Writer代表的等级结构内部，有一些流处理器是对其他类型的流处理器的适配。这就是适配器的应用。</p><div class="md-section-divider"></div><h4 data-anchor-id="b01l" id="装饰模式的应用">装饰模式的应用</h4><p data-anchor-id="47cx">InputStream类型中的装饰模式：</p><p data-anchor-id="8cz3">　InputStream有七个直接的具体子类，有四个属于FilterInputStream的具体子类，如下图所示：</p><p data-anchor-id="bgnm">上图中所有的类都叫做流处理器，这个图就叫做（InputStream类型的）流处理器图。</p><p data-anchor-id="91mu">书中提到根据输入流的源的类型，可以将这些流类分成两种，即原始流类（Original Stream）和链接流处理器（Wrapper Stream）。</p><div class="md-section-divider"></div><h4 data-anchor-id="8doy" id="原始流处理器">原始流处理器</h4><p data-anchor-id="qlae">原始流处理器接收一个Byte数组对象，String对象，FileDiscriptor对象或者不同类型的流源对象，根据上面的图，原始流处理器包括以下四种：</p><blockquote data-anchor-id="cprm" class="white-blockquote">
  <ul>
  <li>ByteArrayInputStream：为多线程的通信提供缓冲区操作功能，接收一个Byte数组作为流的源。</li>
  <li>FileInputStream:建立一个与文件有关的输入流。接收一个File对象作为流的源。</li>
  <li>PipedInputStream：可以与PipedOutputStream配合使用，用于读入一个数据管道的数据，接收一个PipedOutputStream作为源。</li>
  <li>StringBufferInputStream：将一个字符串缓冲区转换为一个输入流。接收一个String对象作为流的源。（ＪＤＫ帮助文档上说明：已过时。此类未能正确地将字符转换为字节。从ＪＤＫ1.1开始，从字符串创建流的首选方法是通过StringReader类进行创建。只有字符串中每个字符的低八位可以由此类使用。）</li>
  </ul>
</blockquote><div class="md-section-divider"></div><h4 data-anchor-id="balj" id="链接流处理器">链接流处理器</h4><p data-anchor-id="dbdr">所谓链接流处理器，就是可以接收另一个流对象作为源，并对之进行功能扩展的类。InputStream类型的链接处理器包括以下几种，它们都接收另一个InputStream对象作为流源。</p><p data-anchor-id="ksa5">(1)FilterInputStream称为过滤输入流，它将另一个输入流作为流源。这个类的子类包括以下几种：</p><blockquote data-anchor-id="j0pa" class="white-blockquote">
  <ul>
  <li>BufferedInputStream：用来从硬盘将数据读入到一个内存缓冲区中，并从缓冲区提供数据。</li>
  <li>DataInputStream：提供基于多字节的读取方法，可以读取原始类型的数据。</li>
  <li>LineNumberInputStream：提供带有行计数功能的过滤输入流。</li>
  <li>PushbackInputStream：提供特殊的功能，可以将已经读取的字节“推回”到输入流中。</li>
  </ul>
</blockquote><p data-anchor-id="1b4f">(2)ObjectInputStream可以将使用ObjectInputStream串行化的原始数据类型和对象重新并行化。</p><p data-anchor-id="z03j">(3)SeqcueneInputStream可以将两个已有的输入流连接起来，形成一个输入流，从而将多个输入流排列构成一个输入流序列。</p><div class="md-section-divider"></div><h3 data-anchor-id="8mvp" id="结束">结束</h3><p data-anchor-id="g6xk">文章转载自： <br>
<a href="http://blog.csdn.net/u012815721/article/details/25279613" target="_blank">http://blog.csdn.net/u012815721/article/details/25279613</a></p></div>
</body>
</html>